# MyBrain

A personal data aggregator that connects to your WhatsApp, Gmail, and Notion accounts, providing AI-powered summaries and insights using Claude.

![MyBrain Dashboard](docs/screenshots/dashboard.png)

## Features

- **WhatsApp Integration**: Connect via QR code to access your chat history
- **Gmail Integration**: OAuth-based connection to your email inbox
- **Notion Integration**: Access your workspace pages and databases
- **AI-Powered Summaries**: Daily and weekly summaries generated by Claude
- **Action Items**: Automatically extracted tasks and follow-ups
- **Ask AI**: Natural language Q&A about your data
- **Offline Storage**: SQLite database for 30-day data retention
- **Smart Caching**: 2.5-hour cache with stale-while-revalidate pattern

## Screenshots

### Setup Page
Connect your data sources and configure your Claude API key.

![Setup Page](docs/screenshots/setup.png)

### Dashboard
View AI-generated summaries across all your connected sources.

![Dashboard](docs/screenshots/dashboard.png)

### WhatsApp Summary
Get insights into your group chats and conversations.

![WhatsApp Tab](docs/screenshots/whatsapp-tab.png)

## Getting Started

### Prerequisites

- Node.js 18+
- npm or yarn
- An Anthropic API key ([get one here](https://console.anthropic.com/settings/keys))
- Google OAuth credentials for Gmail (see [Gmail Setup](#gmail-credentials-setup))

### Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/yourusername/my-brain-app.git
   cd my-brain-app
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Set up Gmail credentials** (see [Gmail Setup](#gmail-credentials-setup) below)

4. **Start the app**
   ```bash
   npm start
   ```

   For development mode with DevTools:
   ```bash
   npm run dev
   ```

### Gmail Credentials Setup

To connect Gmail, you need to create OAuth 2.0 credentials:

1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Create a new project (or select existing)
3. Enable the **Gmail API**:
   - Go to "APIs & Services" → "Library"
   - Search for "Gmail API" and enable it
4. Create OAuth credentials:
   - Go to "APIs & Services" → "Credentials"
   - Click "Create Credentials" → "OAuth client ID"
   - Choose "Desktop app" as application type
   - Download the credentials
5. Set environment variables before running the app:
   ```bash
   export GMAIL_CLIENT_ID="your-client-id.apps.googleusercontent.com"
   export GMAIL_CLIENT_SECRET="your-client-secret"
   npm start
   ```

   Or create a `.env` file (not committed to git):
   ```
   GMAIL_CLIENT_ID=your-client-id.apps.googleusercontent.com
   GMAIL_CLIENT_SECRET=your-client-secret
   ```

### Initial Setup

When you first launch the app, you'll be guided through the setup process:

#### 1. Configure Claude AI (Required)

![Claude Setup](docs/screenshots/claude-setup.png)

1. Enter your Anthropic API key
2. Click "Save API Key"
3. The key is stored securely in your system's encrypted storage

#### 2. Connect WhatsApp

![WhatsApp QR](docs/screenshots/whatsapp-qr.png)

1. Click "Connect WhatsApp"
2. A QR code will appear
3. Open WhatsApp on your phone → Settings → Linked Devices → Link a Device
4. Scan the QR code
5. Wait for the connection to complete

**Note**: The first connection may take a minute. If the QR times out, simply click "Connect WhatsApp" again.

#### 3. Connect Gmail

![Gmail OAuth](docs/screenshots/gmail-oauth.png)

1. Click "Connect Gmail"
2. A browser window will open to Google's OAuth page
3. Sign in and grant permissions
4. Return to the app - you'll see "Connected" status

#### 4. Connect Notion

![Notion Setup](docs/screenshots/notion-setup.png)

1. Go to [notion.so/my-integrations](https://www.notion.so/my-integrations)
2. Click "New integration"
3. Name it "MyBrain" and select your workspace
4. Copy the "Internal Integration Token"
5. Paste the token in the app and click "Connect Notion"

**Important**: You need to share specific Notion pages with your integration:
- Open any page in Notion you want accessible
- Click "..." menu → "Add connections" → Select "MyBrain"

### Using the Dashboard

Once setup is complete, you'll see the main dashboard with:

1. **Today at a Glance**: Combined AI summary from all sources
2. **Source Tabs**: Switch between WhatsApp, Gmail, and Notion
3. **Sub-tabs for each source**:
   - **Today**: Today's activity summary
   - **This Week**: Weekly overview
   - **Action Items**: Tasks and follow-ups
   - **Ask AI**: Ask questions about your data

## Architecture

```
my-brain-app/
├── src/
│   ├── main/
│   │   ├── main.js           # Electron main process
│   │   └── services/
│   │       ├── database.js   # SQLite storage
│   │       ├── whatsapp.js   # WhatsApp Web integration
│   │       ├── gmail.js      # Gmail API integration
│   │       ├── notion.js     # Notion API integration
│   │       └── claude.js     # Claude AI service
│   ├── preload/
│   │   └── preload.js        # IPC bridge
│   └── renderer/
│       ├── setup.html        # Setup wizard
│       ├── dashboard.html    # Main dashboard
│       └── styles.css        # Global styles
├── package.json
└── README.md
```

## Data Storage

- **Credentials**: Stored encrypted using `electron-store`
- **Messages/Data**: SQLite database in your app data folder
- **Cache**: Summary cache with 2.5-hour freshness

Data location:
- macOS: `~/Library/Application Support/my-brain-app/`
- Windows: `%APPDATA%/my-brain-app/`
- Linux: `~/.config/my-brain-app/`

## Privacy & Security

- All data stays on your local machine
- API keys are encrypted at rest
- No data is sent to any server except the respective APIs (WhatsApp Web, Gmail, Notion, Claude)
- You can reset all data from Settings

## Troubleshooting

### WhatsApp won't connect
- Make sure you have a stable internet connection
- Try restarting the app
- Delete the `whatsapp-session` folder in your app data directory

### Gmail shows "Session expired"
- Click "Connect Gmail" again to re-authenticate
- Check that your Google account allows third-party app access

### Notion pages not appearing
- Ensure you've shared the pages with your integration
- Try disconnecting and reconnecting Notion

### Summaries are slow
- First-time summaries take longer as data is being fetched
- Subsequent loads use cached data (< 2.5 hours old)

## Development

```bash
# Run in development mode
npm run dev

# The app will reload automatically on file changes (renderer only)
# Main process changes require restart
```

## License

MIT

## Credits

- Built with [Electron](https://www.electronjs.org/)
- AI powered by [Claude](https://www.anthropic.com/claude) (Anthropic)
- WhatsApp integration via [whatsapp-web.js](https://github.com/pedroslopez/whatsapp-web.js)
- Gmail via [Google APIs](https://developers.google.com/gmail/api)
- Notion via [@notionhq/client](https://github.com/makenotion/notion-sdk-js)
